---
import BaseLayout from '~/layouts/BaseLayout.astro';
import nowTimeline from '~/data/now.json';

interface TimelineItem {
  title: string;
  window: string;
  description: string;
  status: string;
  links?: Array<{ label: string; href: string }>;
}

const items = nowTimeline as TimelineItem[];
---

<BaseLayout
  title="Now | hackall360"
  description="What hackall360 is focused on right now â€” AI control planes, resilience game-days, and agentic workflow prototypes."
>
  <section class="now-section">
    <div class="relative z-10 mx-auto flex max-w-5xl flex-col gap-16 px-6 py-24 sm:px-10 lg:py-28">
      <header class="space-y-6 text-slate-200">
        <p class="font-mono text-xs uppercase tracking-[0.5em] text-accent-light/80">// now</p>
        <h1 class="text-4xl font-semibold text-white sm:text-5xl">Current areas of focus.</h1>
        <p class="max-w-3xl text-base leading-relaxed text-slate-300 sm:text-lg">
          A living snapshot of the control systems, readiness exercises, and agentic tooling getting cycles right now. Each
        card links to build logs, scenario kits, or research notes so you can follow along end to end.
      </p>
    </header>

      <section class="relative space-y-8">
        <span class="absolute left-4 top-0 hidden h-full w-px bg-gradient-to-b from-accent/20 via-accent/40 to-transparent sm:block" aria-hidden="true"></span>
        <div class="space-y-10">
          {items.map((item) => (
            <article class="relative grid grid-cols-1 gap-4 rounded-3xl border border-slate-800/70 bg-slate-950/40 p-8 shadow-[0_0_40px_-30px_rgba(56,189,248,0.7)] transition hover:border-accent/60 sm:grid-cols-[auto,1fr] sm:gap-8">
              <div class="flex items-center gap-4">
                <span class="hidden h-4 w-4 rounded-full border-2 border-accent/70 bg-slate-900 sm:flex"></span>
                <span class="rounded-full border border-accent/40 bg-accent/10 px-4 py-1 text-xs font-semibold uppercase tracking-widest text-accent-light">
                  {item.window}
                </span>
              </div>
              <div class="space-y-4">
                <div class="space-y-2">
                  <h2 class="text-2xl font-semibold text-white">{item.title}</h2>
                  <p class="font-mono text-xs uppercase tracking-[0.4em] text-accent-light/80">{item.status}</p>
                  <p class="text-sm leading-relaxed text-slate-300">{item.description}</p>
                </div>
                {item.links && item.links.length > 0 && (
                  <div class="flex flex-wrap gap-3">
                    {item.links.map((link) => (
                      <a
                        class="inline-flex items-center gap-3 rounded-full border border-slate-700/60 bg-slate-900/50 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-slate-200 transition hover:border-accent/60 hover:text-white"
                        href={link.href}
                      >
                        <span>{link.label}</span>
                        <svg class="h-[clamp(1.5rem,3vw,1.75rem)] w-[clamp(1.5rem,3vw,1.75rem)]" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                          <path d="M7.5 5H15v7.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          <path d="M15 5 5 15" stroke-linecap="round"></path>
                        </svg>
                      </a>
                    ))}
                  </div>
                )}
              </div>
            </article>
          ))}
        </div>
      </section>
    </div>
  </section>
</BaseLayout>

<style lang="css">
  .now-section {
    position: relative;
    isolation: isolate;
    width: 100%;
    overflow: hidden;
    min-height: 100vh;
    background:
      radial-gradient(120% 120% at 50% -20%, rgba(56, 189, 248, 0.18), transparent 70%),
      radial-gradient(130% 130% at 110% 120%, rgba(14, 165, 233, 0.14), transparent 70%),
      linear-gradient(145deg, rgba(2, 6, 23, 0.94), rgba(15, 23, 42, 0.9));
    background-repeat: no-repeat;
    background-size: 160vw 120vh, 130vw 120vh, cover;
  }

  .now-section::before,
  .now-section::after {
    content: '';
    position: absolute;
    pointer-events: none;
    z-index: -1;
  }

  .now-section::before {
    inset: -10% -20% auto -20%;
    height: clamp(24rem, 60vh, 40rem);
    background: radial-gradient(65% 65% at 20% 80%, rgba(94, 234, 212, 0.12), transparent 70%);
    filter: blur(45px);
    opacity: 0.85;
  }

  .now-section::after {
    inset: auto -25% -35% 45%;
    height: clamp(28rem, 70vh, 46rem);
    background: radial-gradient(55% 60% at 50% 50%, rgba(14, 116, 144, 0.2), transparent 75%);
    filter: blur(55px);
    opacity: 0.65;
  }

  @supports (min-height: 100svh) {
    .now-section {
      min-height: 100svh;
      background-size: 160vw 120svh, 130vw 120svh, cover;
    }
  }

  @media (min-width: 768px) {
    .now-section::before {
      inset: -15% -15% auto -25%;
    }

    .now-section::after {
      inset: auto -20% -30% 50%;
    }
  }
</style>
