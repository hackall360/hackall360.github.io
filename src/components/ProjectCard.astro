---
interface Project {
  slug: string;
  name: string;
  description?: string | null;
  tags?: string[];
  stars?: number;
  language?: string | null;
  url: string;
  caseStudy?: string | null;
}

interface Props {
  project: Project;
}

const { project } = Astro.props as Props;
const tags = project.tags ?? [];
const language = project.language ?? 'Language agnostic';
const description =
  project.description?.trim() || 'This project is still getting its full write-up. Stay tuned!';
const stars = typeof project.stars === 'number' ? project.stars : 0;
---
<article
  data-project-card
  data-tags={tags.map((tag) => tag.toLowerCase()).join(',')}
  class="group flex flex-col justify-between rounded-2xl border border-slate-800/60 bg-surface-elevated/40 p-6 text-slate-200 shadow-lg shadow-slate-900/20 transition-all duration-300 hover:border-accent-light/60 hover:bg-surface-highlight/70 hover:shadow-xl hover:shadow-accent/20 focus-within:border-accent-light focus-within:shadow-accent/30"
>
  <header class="flex items-start justify-between gap-4">
    <span class="inline-flex items-center gap-2 rounded-full border border-slate-700 bg-slate-900/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-300 shadow-inner shadow-slate-950/40 transition group-hover:border-accent group-hover:text-accent-light">
      <span class="size-2 rounded-full bg-accent-light"></span>
      {language}
    </span>
    <span class="inline-flex items-center gap-1 rounded-full bg-slate-900/80 px-2.5 py-1 text-xs font-semibold text-slate-400">
      <svg
        class="h-4 w-4 text-amber-300"
        viewBox="0 0 24 24"
        aria-hidden="true"
        focusable="false"
      >
        <path
          fill="currentColor"
          d="M12 3.75l2.167 4.39 4.848.707-3.508 3.42.828 4.822L12 14.938l-4.335 2.151.828-4.822-3.508-3.42 4.848-.707z"
        />
      </svg>
      <span class="sr-only">GitHub stars:</span>
      <span aria-hidden="true">{stars}</span>
    </span>
  </header>

  <div class="mt-5 space-y-3">
    <h3 class="text-xl font-semibold text-slate-100 transition group-hover:text-accent-light">
      <a
        class="outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900"
        href={project.url}
        target="_blank"
        rel="noreferrer"
      >
        {project.name}
      </a>
    </h3>
    <p class="text-sm leading-relaxed text-slate-400">{description}</p>
    {tags.length > 0 && (
      <ul class="flex flex-wrap gap-2">
        {tags.map((tag) => (
          <li class="text-xs">
            <span class="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-900/60 px-3 py-1 text-[0.7rem] font-medium uppercase tracking-wide text-slate-300 transition group-hover:border-accent group-hover:text-accent-light">
              {tag}
            </span>
          </li>
        ))}
      </ul>
    )}
  </div>

  <footer class="mt-6 flex flex-wrap items-center gap-3">
    <a
      class="inline-flex items-center justify-center gap-2 rounded-full border border-accent/70 bg-accent/10 px-4 py-2 text-sm font-semibold text-accent-light transition hover:bg-accent/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900"
      href={project.url}
      target="_blank"
      rel="noreferrer"
    >
      View on GitHub
      <svg class="h-4 w-4" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path
          fill="currentColor"
          d="M5 12a1 1 0 0 1 1-1h9.586l-2.293-2.293a1 1 0 0 1 1.414-1.414l4.707 4.707-4.707 4.707a1 1 0 0 1-1.414-1.414L15.586 13H6a1 1 0 0 1-1-1Z"
        />
      </svg>
    </a>
    {project.caseStudy && (
      <a
        class="inline-flex items-center justify-center gap-2 rounded-full border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-accent hover:text-accent-light focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900"
        href={project.caseStudy}
      >
        Read case study
        <svg class="h-4 w-4" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path
            fill="currentColor"
            d="M12 4a1 1 0 0 1 1 1v6l3.553 2.133a1 1 0 1 1-1.006 1.734l-4-2.4A1 1 0 0 1 11 11V5a1 1 0 0 1 1-1Z"
          />
          <path
            fill="currentColor"
            d="M5 5a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V5Zm3-1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H8Z"
          />
        </svg>
      </a>
    )}
  </footer>
</article>
